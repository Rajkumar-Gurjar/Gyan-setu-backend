openapi: 3.1.0
info:
  title: GyaanSetu Auth API
  version: 1.0.0
paths:
  /api/v1/auth/register:
    post:
      summary: Register a new student
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [email, password, profile, studentInfo]
              properties:
                email: { type: string, format: email }
                password: { type: string, minLength: 8 }
                profile:
                  type: object
                  properties:
                    firstName: { type: string }
                    lastName: { type: string }
                    language: { type: string, enum: [pa, hi, en] }
                studentInfo:
                  type: object
                  properties:
                    schoolCode: { type: string }
                    class: { type: number }
      responses:
        '201':
          description: Created
        '400':
          description: Validation Error (e.g., Invalid School Code)
        '409':
          description: Email Already Exists
  /api/v1/auth/login:
    post:
      summary: Login
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email: { type: string }
                password: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken: { type: string }
                  refreshToken: { type: string }
        '401':
          description: Unauthorized (Invalid Credentials)
        '423':
          description: Locked (Account temporarily locked due to failed attempts)
  /api/v1/auth/refresh:
    post:
      summary: Refresh access token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [refreshToken]
              properties:
                refreshToken: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken: { type: string }